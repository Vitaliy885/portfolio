document.addEventListener("DOMContentLoaded",function(){var s=document.querySelector("#camera-stream"),a=document.querySelector("#snap"),e=document.querySelector("#start-camera"),t=document.querySelector(".controls"),i=document.querySelector("#take-photo"),r=document.querySelector("#delete-photo"),o=document.querySelector("#download-photo"),n=document.querySelector("#error-message");function c(){l(),s.classList.add("visible"),t.classList.add("visible")}function d(e,t){(t=t||"")&&console.error(t),n.innerText=e,l(),n.classList.add("visible")}function l(){t.classList.remove("visible"),e.classList.remove("visible"),s.classList.remove("visible"),snap.classList.remove("visible"),n.classList.remove("visible")}navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia?navigator.getMedia({video:!0},function(e){s.src=window.URL.createObjectURL(e),s.play(),s.onplay=function(){c()}},function(e){d("There was an error with accessing the camera stream: "+e.name,e)}):d("Your browser doesn't have support for the navigator.getUserMedia interface."),e.addEventListener("click",function(e){e.preventDefault(),s.play(),c()}),i.addEventListener("click",function(e){e.preventDefault();var t=function(){var e=document.querySelector("canvas"),t=e.getContext("2d"),a=s.videoWidth,i=s.videoHeight;if(a&&i)return e.width=a,e.height=i,t.drawImage(s,0,0,a,i),e.toDataURL("image/png")}();a.setAttribute("src",t),a.classList.add("visible"),r.classList.remove("disabled"),o.classList.remove("disabled"),o.href=t,s.pause()}),r.addEventListener("click",function(e){e.preventDefault(),a.setAttribute("src",""),a.classList.remove("visible"),r.classList.add("disabled"),o.classList.add("disabled"),s.play()})});